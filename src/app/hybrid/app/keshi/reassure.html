<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>答疑解惑</title>
    <meta charset="utf-8">
    <meta name="keywords" content="答疑解惑" />
    <meta name="description" content="答疑解惑" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="答疑解惑">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="./css/public.css" />
    <link rel="stylesheet" href="css/Hscroll.css">
    <link rel="stylesheet" href="./css/reassure.css" />
</head>
<body class="padding-bottom-60">

    <header class="header">
        <a href="#" class="header-return"></a>
        <span class="show-all">全部<img src="imgs/show_hide.png" class="show-hide-rotate"></span>
        <a href="javascript:" class="er-btn"></a>
    </header>
    <div class="top-nav boxSha">
        <a href="#">
            <img src="imgs/d.png"/>待回答
        </a>
        <a href="#">
            <img src="imgs/b.jpg"/>我回答
        </a>
        <a href="#">
            <img src="imgs/c.jpg"/>公开
        </a>
        <a href="#">
            <img src="imgs/a.jpg"/>全部
        </a>
        
        
    </div>
    <div id="Hwrap">
        <div id="Hscroll">
            <header class="Hs-header"><span class="pullDownIcon"></span><em>下拉刷新</em></header>
                
                <div class="load-more"><img src="imgs/load.gif"></div>
                <ul class="ques-list">
                    <li class="per-ques borR-3">
                        <div class="ques-title clear">
                            <img src="imgs/head.jpg" class="ques-head-pic" />
                            <div class="title-content">
                                <span>王先生1</span>
                                <p class="answer-label">待回答</p>
                                <div class="opation-wrap">
                                    <div class="alert-opa borR-3" data-show="false">
                                        <span class="to-public">设为公开</span>
                                        <span class="to-delete">删除</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="ques-txt">膝盖有积液，走路不怎么感觉到就是蹲下觉得膝盖部位发涨、麻木，站起来费劲，这是什么原因呢？</p>
                        <footer class="ques-footer">
                            <time class="ques-time">1分钟前</time>
                            <a href="#" class="reply-num-btn borR-3">回复 0</a>
                        </footer>
                    </li>
                    <li class="per-ques borR-3">
                        <div class="ques-title clear">
                            <img src="imgs/head.jpg" class="ques-head-pic" />
                            <div class="title-content">
                                <span>王先生2</span>
                                <p class="answer-label">待回答</p>
                                <div class="opation-wrap">
                                    <div class="alert-opa borR-3" data-show="false">
                                        <span class="to-public">设为公开</span>
                                        <span class="to-delete">删除</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="ques-txt">膝盖有积液，走路不怎么感觉到就是蹲下觉得膝盖部位发涨、麻木，站起来费劲，这是什么原因呢？</p>
                        <footer class="ques-footer">
                            <time class="ques-time">1分钟前</time>
                            <a href="#" class="reply-num-btn borR-3">回复 0</a>
                        </footer>
                    </li>
                    <li class="per-ques borR-3">
                        <div class="ques-title clear">
                            <img src="imgs/head.jpg" class="ques-head-pic" />
                            <div class="title-content">
                                <span>王先生3</span>
                                <p class="answer-label">待回答</p>
                                <div class="opation-wrap">
                                    <div class="alert-opa borR-3" data-show="false">
                                        <span class="to-public">设为公开</span>
                                        <span class="to-delete">删除</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="ques-txt">膝盖有积液，走路不怎么感觉到就是蹲下觉得膝盖部位发涨、麻木，站起来费劲，这是什么原因呢？</p>
                        <footer class="ques-footer">
                            <time class="ques-time">1分钟前</time>
                            <a href="#" class="reply-num-btn borR-3">回复 0</a>
                        </footer>
                    </li>
                    <li class="per-ques borR-3">
                        <div class="ques-title clear">
                            <img src="imgs/head.jpg" class="ques-head-pic" />
                            <div class="title-content">
                                <span>王先生4</span>
                                <p class="answer-label">待回答</p>
                                <div class="opation-wrap">
                                    <div class="alert-opa borR-3" data-show="false">
                                        <span class="to-public">设为公开</span>
                                        <span class="to-delete">删除</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="ques-txt">膝盖有积液，走路不怎么感觉到就是蹲下觉得膝盖部位发涨、麻木，站起来费劲，这是什么原因呢？</p>
                        <footer class="ques-footer">
                            <time class="ques-time">1分钟前</time>
                            <a href="#" class="reply-num-btn borR-3">回复 0</a>
                        </footer>
                    </li>
                </ul>
                
            <footer class="Hs-footer"><span class="pullUpIcon"></span><em>上拉加载更多</em></footer>
        </div>
    </div>

    <footer class="footer2">
        <a href="#"></a>
        <a href="#"></a>
        <a href="#" class="active"></a>
    </footer>

    <!-- 完善信息弹窗 -->
    <div class="alert-mark flex-center window-hide" id="through-window">
        <section class="window borR-3">
            <a href="javascript:;" class="close-btn through-close borR-50">×</a>
            <div class="win-top">
                <div class="win-title borR-50 boxSiz">
                    <h3>完善</h3>
                    <h3>信息</h3>
                </div>
                <p>您的个人信息还不完善，不能进行接单，</p>
                <p>请去个人中心完善信息</p>
            </div>
            <footer class="win-foot">
                <a href="#">去完善个人信息</a>
            </footer>
        </section>
    </div>
    <!-- 完善信息弹窗 结束 -->

    <!-- 二维码弹窗 -->
    <div class="alert-mark flex-center window-hide er-close-mark" id="er-window" >
        <img src="imgs/er.jpg" class="erpic" />
    </div>
    <!-- 二维码弹窗 结束 -->

    <!-- <section class="null-sec">
        <img src="imgs/sun.jpg" class="null-sun">
        <p>您还没有未完成订单，</p>
        <p>赶快继续去接单区接单吧！</p>
    </section> -->

    <div class="reply-box">
        <div class="reply-input borR-3" contenteditable="true"></div>
        <span class="reply-btn borR-3">回复</span>
    </div>
    

    <script src="http://s1.anxinsta.com/com/mobile/g.js"></script>
    <script src="http://s1.anxinsta.com/com/mobile/config.js"></script>
    <script>
    G.use(['zepto', 'widget/clientCheck/js/clientCheck.js', 'widget/Hscroll/js/Hscroll2.js', 'widget/waitLoading/js/waitLoading.js'], function($, Client, Hscroll, waitLoading){

        // 实例化等待加载遮罩
        // var WL = new waitLoading();
        // function showWaitLoad(){
        //     WL.init({
        //         color : "#fff",
        //         width : "30px",
        //         height : "30px",
        //         // type -> ['circle', 'chasingDots', 'cubeGrid', 'doubleBounce', 'fadingCircle'
        //         //          'pulse', 'rotatingPlane', 'threeBounce', 'wanderingCubes', 'wave'
        //         //          'wordpress']
        //         type : "circle",
        //         loadEnd : function(){
        //             WL.show();
        //         }
        //     });
        // }

        // showWaitLoad();
        // setTimeout(function(){
        //     WL.hide(300);
        // }, 2000);
        
        var $alertDom = null;
        // 点击操作按钮时候
        $('.opation-wrap').on('tap', function(event){
            // 先show所有
            $('.alert-opa').hide();

            $alertDom = $(this).find('.alert-opa');
            if($alertDom.data('show') == false){
                $alertDom.show();
                $alertDom.data('show', true);
            }else{
                $alertDom.hide();
                $alertDom.data('show', false);
            }

            if(event.stopPropagation){
                event.stopPropagation();
            }else{
                event.cancelBubble = true;
            }
            
        });

        $(document).on('tap', function(){
            $('.alert-opa').hide();
            if($alertDom){
                $alertDom.data('show', false);
            }
            
        });

        $('.alert-opa').on('tap', function(event){
            if(event.stopPropagation){
                event.stopPropagation();
            }else{
                event.cancelBubble = true;
            }
        });

        // 点击头部的全部按钮，展开隐藏导航
        $('.show-all').on('tap', function(){
            $(this).find('img').toggleClass('rotate180');
            $('.top-nav').toggleClass('slide-show');
        });


        // 弹出完善信息
        //alertWin('#through-window', '.through-close');
        // 点击头部二维码btn，弹出二维码弹窗
        $('.er-btn').on('tap', function(){
            alertWin('#er-window', '.er-close-mark');
        });
        
        $('.erpic').on('tap', function(event){
            if(event.stopPropagation){
                event.stopPropagation();
            }else{
                event.cancelBubble = true;
            }
        });

        // 弹窗
        function alertWin(winSelector, closeSelector){
            $(winSelector).removeClass('window-hide');
            $(closeSelector).on('tap', function(){
                $(winSelector).addClass('window-hide');
                $(closeSelector).off('tap');
            });
        }

        var system = Client.client.system;
        if(system.iphone){
            // 是iphone,增加头部高度
            $('.header').addClass('ios-header');
        }else{
            $('.header').removeClass('ios-header');
        }


        // 初始化刷新的top
        //$('#Hwrap').css({top: $('.header').innerHeight() + 'px'});
        $('#Hwrap').css({height: $(window).height() - $('.header').height() - 60 + 'px'});
        // 只实例化对象不传配置参数的时候，指示做了一个模拟滚动，可以用来修复移动端fixed定位bug
        var hscroll = new Hscroll({
            refreshCallback : function(self){
                // 执行下拉刷新的操作

                //self.refreshEnd();
                setTimeout(function(){
                    self.refreshEnd();
                },1000);
            },
            loadMoreCallback : function(self){
                // 执行上拉加载更多的操作

                setTimeout(function(){
                    self.loadMoreEnd();
                },1000);
                //self.loadMoreEnd();
            },

            // 选择您需要的加载类型【只要下拉刷新 - onlyTop 】【只要上拉加载更多 - onlyBottom 】【两个都要 - double 】【都不要 - none 】
            opationType : 'double'

        });

        // 点击回复按钮
        $('.reply-num-btn').on('click', function(event){
            $('.reply-box').css({left:'0'});
            $('.reply-input').focus();
            // // 失去焦点
            // $('.reply-input').on('blur', function(){
            //     $('.reply-box').css({left:'100%'});
            //     $('.reply-input').off('blur');
            // });

            if(event.stopPropagation){
                event.stopPropagation();
            }else{
                event.cancelBubble = true;
            }
        });

        setInterval(function(){
            $('.reply-box').css({height: parseInt($('.reply-input').height()) + 16 + 'px' });
            console.log($('.reply-input').height());
        }, 20);


        $(window).on('scroll', function(){
            alert(4);
        });

        
    });
    </script>

</body>
</html>